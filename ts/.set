# 言語共通設定の呼び出し
if [ -f "../.common" ] ; then
    source "../.common"
fi

# 必要なセットアップ処理(あれば)
yarn install
acc config default-template ts

# 言語別コマンド(提供コマンドは全言語共通とする)
## 現在の問題の解答編集
function edit () {
	code ./Main.ts
}
## 現在の問題の提供テストケースに対する動作確認
function test () {
	local stdout=`logfile test-stdout`
	local stderr=`logfile test-stderr`
	oj test -c "npx ts-node Main.ts" -N 1> >(tee -a $stdout >&1 ) 2> >(tee -a $stderr >/dev/null )
	code $stderr
}
## 現在の問題の解答提出
function submit () {
	local log=`logfile submit`
	acc submit -s -- -l 5058 -y | tee -a $log
	local line=`grep -e "\[SUCCESS\]\ result\:" $log`
	local url=${line/"[SUCCESS] result: "/""}
	open $url
}
